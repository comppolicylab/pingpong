{
  "schema_version": "1.1",
  "type_definitions": [
    {
      "type": "user"
    },
    {
      "metadata": {
        "relations": {
          "admin": {
            "directly_related_user_types": [
              {
                "type": "user"
              }
            ]
          },
          "can_create_institution": {
            "directly_related_user_types": [
              {
                "type": "user"
              }
            ]
          },
          "can_do_reckless_things": {
            "directly_related_user_types": [
              {
                "type": "user"
              }
            ]
          }
        }
      },
      "relations": {
        "admin": {
          "this": {}
        },
        "can_create_institution": {
          "union": {
            "child": [
              {
                "this": {}
              },
              {
                "computedUserset": {
                  "relation": "admin"
                }
              }
            ]
          }
        },
        "can_do_reckless_things": {
          "this": {}
        }
      },
      "type": "root"
    },
    {
      "metadata": {
        "relations": {
          "admin": {
            "directly_related_user_types": [
              {
                "type": "user"
              }
            ]
          },
          "can_create_class": {
            "directly_related_user_types": [
              {
                "type": "user"
              }
            ]
          },
          "can_delete": {},
          "can_view": {},
          "parent": {
            "directly_related_user_types": [
              {
                "type": "root"
              }
            ]
          }
        }
      },
      "relations": {
        "admin": {
          "union": {
            "child": [
              {
                "this": {}
              },
              {
                "tupleToUserset": {
                  "computedUserset": {
                    "relation": "admin"
                  },
                  "tupleset": {
                    "relation": "parent"
                  }
                }
              }
            ]
          }
        },
        "can_create_class": {
          "union": {
            "child": [
              {
                "this": {}
              },
              {
                "computedUserset": {
                  "relation": "admin"
                }
              }
            ]
          }
        },
        "can_delete": {
          "tupleToUserset": {
            "computedUserset": {
              "relation": "admin"
            },
            "tupleset": {
              "relation": "parent"
            }
          }
        },
        "can_view": {
          "computedUserset": {
            "relation": "admin"
          }
        },
        "parent": {
          "this": {}
        }
      },
      "type": "institution"
    },
    {
      "metadata": {
        "relations": {
          "admin": {
            "directly_related_user_types": [
              {
                "type": "user"
              }
            ]
          },
          "can_create_assistants": {
            "directly_related_user_types": [
              {
                "relation": "student",
                "type": "class"
              }
            ]
          },
          "can_create_thread": {},
          "can_delete": {},
          "can_edit_info": {},
          "can_manage_assistants": {
            "directly_related_user_types": [
              {
                "relation": "admin",
                "type": "class"
              },
              {
                "relation": "supervisor",
                "type": "class"
              }
            ]
          },
          "can_manage_threads": {
            "directly_related_user_types": [
              {
                "relation": "supervisor",
                "type": "class"
              }
            ]
          },
          "can_manage_users": {},
          "can_publish_assistants": {
            "directly_related_user_types": [
              {
                "relation": "student",
                "type": "class"
              }
            ]
          },
          "can_publish_threads": {
            "directly_related_user_types": [
              {
                "relation": "student",
                "type": "class"
              }
            ]
          },
          "can_upload_class_files": {
            "directly_related_user_types": [
              {
                "relation": "student",
                "type": "class"
              }
            ]
          },
          "can_upload_user_files": {},
          "can_view": {},
          "can_view_api_key": {},
          "can_view_users": {},
          "member": {},
          "parent": {
            "directly_related_user_types": [
              {
                "type": "institution"
              }
            ]
          },
          "student": {
            "directly_related_user_types": [
              {
                "type": "user"
              }
            ]
          },
          "supervisor": {},
          "teacher": {
            "directly_related_user_types": [
              {
                "type": "user"
              }
            ]
          }
        }
      },
      "relations": {
        "admin": {
          "union": {
            "child": [
              {
                "this": {}
              },
              {
                "tupleToUserset": {
                  "computedUserset": {
                    "relation": "admin"
                  },
                  "tupleset": {
                    "relation": "parent"
                  }
                }
              }
            ]
          }
        },
        "can_create_assistants": {
          "union": {
            "child": [
              {
                "this": {}
              },
              {
                "computedUserset": {
                  "relation": "supervisor"
                }
              }
            ]
          }
        },
        "can_create_thread": {
          "computedUserset": {
            "relation": "member"
          }
        },
        "can_delete": {
          "tupleToUserset": {
            "computedUserset": {
              "relation": "admin"
            },
            "tupleset": {
              "relation": "parent"
            }
          }
        },
        "can_edit_info": {
          "computedUserset": {
            "relation": "supervisor"
          }
        },
        "can_manage_assistants": {
          "this": {}
        },
        "can_manage_threads": {
          "this": {}
        },
        "can_manage_users": {
          "computedUserset": {
            "relation": "supervisor"
          }
        },
        "can_publish_assistants": {
          "union": {
            "child": [
              {
                "this": {}
              },
              {
                "computedUserset": {
                  "relation": "supervisor"
                }
              }
            ]
          }
        },
        "can_publish_threads": {
          "union": {
            "child": [
              {
                "this": {}
              },
              {
                "computedUserset": {
                  "relation": "can_manage_threads"
                }
              }
            ]
          }
        },
        "can_upload_class_files": {
          "union": {
            "child": [
              {
                "this": {}
              },
              {
                "computedUserset": {
                  "relation": "supervisor"
                }
              }
            ]
          }
        },
        "can_upload_user_files": {
          "computedUserset": {
            "relation": "can_create_thread"
          }
        },
        "can_view": {
          "computedUserset": {
            "relation": "member"
          }
        },
        "can_view_api_key": {
          "tupleToUserset": {
            "computedUserset": {
              "relation": "admin"
            },
            "tupleset": {
              "relation": "parent"
            }
          }
        },
        "can_view_users": {
          "computedUserset": {
            "relation": "supervisor"
          }
        },
        "member": {
          "union": {
            "child": [
              {
                "computedUserset": {
                  "relation": "admin"
                }
              },
              {
                "computedUserset": {
                  "relation": "teacher"
                }
              },
              {
                "computedUserset": {
                  "relation": "student"
                }
              }
            ]
          }
        },
        "parent": {
          "this": {}
        },
        "student": {
          "this": {}
        },
        "supervisor": {
          "union": {
            "child": [
              {
                "computedUserset": {
                  "relation": "admin"
                }
              },
              {
                "computedUserset": {
                  "relation": "teacher"
                }
              }
            ]
          }
        },
        "teacher": {
          "this": {}
        }
      },
      "type": "class"
    },
    {
      "metadata": {
        "relations": {
          "can_delete": {},
          "can_participate": {},
          "can_publish": {},
          "can_view": {
            "directly_related_user_types": [
              {
                "relation": "member",
                "type": "class"
              }
            ]
          },
          "parent": {
            "directly_related_user_types": [
              {
                "type": "class"
              }
            ]
          },
          "party": {
            "directly_related_user_types": [
              {
                "type": "user"
              }
            ]
          }
        }
      },
      "relations": {
        "can_delete": {
          "union": {
            "child": [
              {
                "computedUserset": {
                  "relation": "party"
                }
              },
              {
                "tupleToUserset": {
                  "computedUserset": {
                    "relation": "can_manage_threads"
                  },
                  "tupleset": {
                    "relation": "parent"
                  }
                }
              }
            ]
          }
        },
        "can_participate": {
          "intersection": {
            "child": [
              {
                "computedUserset": {
                  "relation": "party"
                }
              },
              {
                "tupleToUserset": {
                  "computedUserset": {
                    "relation": "member"
                  },
                  "tupleset": {
                    "relation": "parent"
                  }
                }
              }
            ]
          }
        },
        "can_publish": {
          "union": {
            "child": [
              {
                "intersection": {
                  "child": [
                    {
                      "computedUserset": {
                        "relation": "party"
                      }
                    },
                    {
                      "union": {
                        "child": [
                          {
                            "tupleToUserset": {
                              "computedUserset": {
                                "relation": "can_publish_threads"
                              },
                              "tupleset": {
                                "relation": "parent"
                              }
                            }
                          },
                          {
                            "tupleToUserset": {
                              "computedUserset": {
                                "relation": "supervisor"
                              },
                              "tupleset": {
                                "relation": "parent"
                              }
                            }
                          }
                        ]
                      }
                    }
                  ]
                }
              },
              {
                "intersection": {
                  "child": [
                    {
                      "tupleToUserset": {
                        "computedUserset": {
                          "relation": "can_manage_threads"
                        },
                        "tupleset": {
                          "relation": "parent"
                        }
                      }
                    },
                    {
                      "tupleToUserset": {
                        "computedUserset": {
                          "relation": "can_publish_threads"
                        },
                        "tupleset": {
                          "relation": "parent"
                        }
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        "can_view": {
          "intersection": {
            "child": [
              {
                "union": {
                  "child": [
                    {
                      "this": {}
                    },
                    {
                      "computedUserset": {
                        "relation": "party"
                      }
                    },
                    {
                      "tupleToUserset": {
                        "computedUserset": {
                          "relation": "can_manage_threads"
                        },
                        "tupleset": {
                          "relation": "parent"
                        }
                      }
                    }
                  ]
                }
              },
              {
                "tupleToUserset": {
                  "computedUserset": {
                    "relation": "member"
                  },
                  "tupleset": {
                    "relation": "parent"
                  }
                }
              }
            ]
          }
        },
        "parent": {
          "this": {}
        },
        "party": {
          "this": {}
        }
      },
      "type": "thread"
    },
    {
      "metadata": {
        "relations": {
          "can_delete": {},
          "can_edit": {},
          "can_interact_with": {},
          "can_publish": {},
          "can_view": {
            "directly_related_user_types": [
              {
                "relation": "member",
                "type": "class"
              }
            ]
          },
          "owner": {
            "directly_related_user_types": [
              {
                "type": "user"
              }
            ]
          },
          "parent": {
            "directly_related_user_types": [
              {
                "type": "class"
              }
            ]
          }
        }
      },
      "relations": {
        "can_delete": {
          "union": {
            "child": [
              {
                "computedUserset": {
                  "relation": "owner"
                }
              },
              {
                "tupleToUserset": {
                  "computedUserset": {
                    "relation": "can_manage_assistants"
                  },
                  "tupleset": {
                    "relation": "parent"
                  }
                }
              }
            ]
          }
        },
        "can_edit": {
          "union": {
            "child": [
              {
                "computedUserset": {
                  "relation": "owner"
                }
              },
              {
                "tupleToUserset": {
                  "computedUserset": {
                    "relation": "can_manage_assistants"
                  },
                  "tupleset": {
                    "relation": "parent"
                  }
                }
              }
            ]
          }
        },
        "can_interact_with": {
          "computedUserset": {
            "relation": "can_view"
          }
        },
        "can_publish": {
          "union": {
            "child": [
              {
                "intersection": {
                  "child": [
                    {
                      "computedUserset": {
                        "relation": "owner"
                      }
                    },
                    {
                      "tupleToUserset": {
                        "computedUserset": {
                          "relation": "can_publish_assistants"
                        },
                        "tupleset": {
                          "relation": "parent"
                        }
                      }
                    }
                  ]
                }
              },
              {
                "intersection": {
                  "child": [
                    {
                      "tupleToUserset": {
                        "computedUserset": {
                          "relation": "can_manage_assistants"
                        },
                        "tupleset": {
                          "relation": "parent"
                        }
                      }
                    },
                    {
                      "tupleToUserset": {
                        "computedUserset": {
                          "relation": "can_publish_assistants"
                        },
                        "tupleset": {
                          "relation": "parent"
                        }
                      }
                    }
                  ]
                }
              }
            ]
          }
        },
        "can_view": {
          "union": {
            "child": [
              {
                "this": {}
              },
              {
                "computedUserset": {
                  "relation": "owner"
                }
              },
              {
                "tupleToUserset": {
                  "computedUserset": {
                    "relation": "can_manage_assistants"
                  },
                  "tupleset": {
                    "relation": "parent"
                  }
                }
              }
            ]
          }
        },
        "owner": {
          "this": {}
        },
        "parent": {
          "this": {}
        }
      },
      "type": "assistant"
    },
    {
      "metadata": {
        "relations": {
          "can_delete": {},
          "can_view": {},
          "owner": {
            "directly_related_user_types": [
              {
                "type": "user"
              }
            ]
          },
          "parent": {
            "directly_related_user_types": [
              {
                "type": "class"
              }
            ]
          },
          "thread": {
            "directly_related_user_types": [
              {
                "type": "thread"
              }
            ]
          }
        }
      },
      "relations": {
        "can_delete": {
          "union": {
            "child": [
              {
                "computedUserset": {
                  "relation": "owner"
                }
              },
              {
                "tupleToUserset": {
                  "computedUserset": {
                    "relation": "can_manage_assistants"
                  },
                  "tupleset": {
                    "relation": "parent"
                  }
                }
              }
            ]
          }
        },
        "can_view": {
          "union": {
            "child": [
              {
                "computedUserset": {
                  "relation": "owner"
                }
              },
              {
                "tupleToUserset": {
                  "computedUserset": {
                    "relation": "can_manage_assistants"
                  },
                  "tupleset": {
                    "relation": "parent"
                  }
                }
              },
              {
                "tupleToUserset": {
                  "computedUserset": {
                    "relation": "can_view"
                  },
                  "tupleset": {
                    "relation": "thread"
                  }
                }
              }
            ]
          }
        },
        "owner": {
          "this": {}
        },
        "parent": {
          "this": {}
        },
        "thread": {
          "this": {}
        }
      },
      "type": "user_file"
    },
    {
      "metadata": {
        "relations": {
          "can_delete": {},
          "can_view": {},
          "owner": {
            "directly_related_user_types": [
              {
                "type": "user"
              }
            ]
          },
          "parent": {
            "directly_related_user_types": [
              {
                "type": "class"
              }
            ]
          }
        }
      },
      "relations": {
        "can_delete": {
          "union": {
            "child": [
              {
                "computedUserset": {
                  "relation": "owner"
                }
              },
              {
                "tupleToUserset": {
                  "computedUserset": {
                    "relation": "supervisor"
                  },
                  "tupleset": {
                    "relation": "parent"
                  }
                }
              }
            ]
          }
        },
        "can_view": {
          "tupleToUserset": {
            "computedUserset": {
              "relation": "member"
            },
            "tupleset": {
              "relation": "parent"
            }
          }
        },
        "owner": {
          "this": {}
        },
        "parent": {
          "this": {}
        }
      },
      "type": "class_file"
    }
  ]
}
